#!/bin/bash

set -e # Errors are fatal
set -x # Show commands

$MOZSEARCH_ROOT/scripts/find-repo-files.py
$MOZSEARCH_ROOT/scripts/mkdirs.sh

$MOZSEARCH_ROOT/scripts/cpp-configure.sh

cd $OBJDIR
make -j8
cd -

$MOZSEARCH_ROOT/scripts/find-objdir-files.py
$MOZSEARCH_ROOT/scripts/objdir-mkdirs.sh

$MOZSEARCH_ROOT/scripts/build-codesearch.sh

$MOZSEARCH_ROOT/scripts/js-analyze.sh

$MOZSEARCH_ROOT/scripts/crossref.sh

$MOZSEARCH_ROOT/scripts/output.sh
